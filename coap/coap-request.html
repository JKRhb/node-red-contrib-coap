<script type="text/javascript">
    RED.nodes.registerType("coap request", {
        category: "network",
        color: "#f4a261",
        defaults: {
            method: {
                value: "GET",
                validate: (v) => ["", "GET", "PUT", "POST", "DELETE", "FETCH", "PATCH", "iPATCH"].includes(v),
            },
            confirmable: { value: true, required: true },
            observe: { value: false, required: true },
            multicast: { value: false, required: true },
            multicastTimeout: { value: 20000, required: false },
            url: { value: "" },
            "content-format": { value: "text/plain" },
            "raw-buffer": { value: false, required: true },
            name: { value: "" },
        },
        inputs: 1,
        outputs: 1,
        icon: "white-globe.png",
        align: "left",
        label: function () {
            return this.name || this._("coapRequest.nodeLabel");
        },
        labelStyle: function () {
            return this.name ? "node_label_italic" : "";
        },
    });
</script>

<script type="text/html" data-template-name="coap request">
    <div class="form-row">
        <label for="node-input-url"> <i class="fa fa-globe"></i> <span data-i18n="coapRequest.inputURL.label"></span> </label>
        <input
            type="text"
            id="node-input-url"
            data-i18n="[placeholder]coapRequest.inputURL.placeholder"
        />
    </div>
    <div class="form-row">
        <label for="node-input-method">
            <i class="fa fa-tasks"></i> <span data-i18n="coapRequest.inputMethod.label"></span>
        </label>
        <select id="node-input-method">
            <option value=""></option>
            <option value="GET">GET</option>
            <option value="PUT">PUT</option>
            <option value="POST">POST</option>
            <option value="DELETE">DELETE</option>
            <option value="FETCH">FETCH</option>
            <option value="PATCH">PATCH</option>
            <option value="iPATCH">iPATCH</option>
        </select>
    </div>

    <div class="form-row">
        <input type="checkbox" id="node-input-confirmable" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-input-confirmable" style="width: auto" data-i18n="coapRequest.inputConfirmable.label"></label>
    </div>

    <div class="form-row">
        <input type="checkbox" id="node-input-observe" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-input-observe" style="width: auto" data-i18n="coapRequest.inputObserve.label"></label>
    </div>

    <div class="form-row">
        <input type="checkbox" id="node-input-raw-buffer" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-input-raw-buffer" style="width: auto" data-i18n="coapRequest.inputRawBuffer.label"></label>
    </div>

    <div class="form-row">
        <input type="checkbox" id="node-input-multicast" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-input-multicast" style="width: auto" data-i18n="coapRequest.inputMulticast.label"></label>
    </div>
    <div class="form-row">
        <label for="node-input-multicast-timeout">
            <i class="fa fa-clock-o"></i>
            <span data-i18n="coapRequest.inputMulticastTimeout.label"></span>
        </label>
        <input type="text" id="node-input-multicast-timeout" placeholder="20000" />
    </div>
    <div class="form-row">
        <label for="node-input-content-format">
            <i class="fa fa-file"></i> <span data-i18n="coapRequest.inputContentFormat.label"></span>
        </label>
        <select id="node-input-content-format">
            <option>text/plain</option>
            <option>application/json</option>
            <option>application/cbor</option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="coapRequest.inputName.label"></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]coapRequest.inputName.placeholder" />
    </div>
    <div class="form-tips">
        <span data-i18n="[html]coapRequest.tip">
    </div>
</script>

